{"version":3,"file":"C0sslGl3.js","sources":["../../../../../../src/lib/storage.js","../../../../../../src/lib/data/suspects.js"],"sourcesContent":["import { supabase } from './supabase';\n\nexport async function uploadImage(file, suspectId, fileName) {\n  if (!file || !suspectId || !fileName) {\n    console.error('Upload validation failed:', { file: !!file, suspectId, fileName });\n    throw new Error('Missing required parameters for upload');\n  }\n\n  try {\n    const path = `${suspectId}/${fileName}`;\n    console.log('Starting upload process:', {\n      path,\n      fileSize: file.size,\n      fileType: file.type,\n      lastModified: file.lastModified,\n      suspectId\n    });\n\n    const { data, error } = await supabase.storage\n      .from('suspects')\n      .upload(path, file, {\n        cacheControl: '3600',\n        upsert: true\n      });\n\n    if (error) {\n      console.error('Supabase upload error details:', error);\n      throw error;\n    }\n\n    console.log('Upload completed successfully:', {\n      data,\n      path,\n      fullPath: data?.path,\n      id: data?.id\n    });\n    return data;\n  } catch (error) {\n    console.error('Upload process failed:', error);\n    throw new Error(`Upload failed: ${error.message}`);\n  }\n}\n\nexport async function getImageUrl(path) {\n  if (!path) {\n    throw new Error('Path is required');\n  }\n\n  try {\n    console.log('Getting public URL for:', path);\n    const { data: { publicUrl }, error } = await supabase.storage\n      .from('suspects')\n      .getPublicUrl(path);\n    \n    if (error) {\n      throw error;\n    }\n\n    if (!publicUrl) {\n      throw new Error('No public URL returned');\n    }\n\n    console.log('Public URL generated:', publicUrl);\n    return publicUrl;\n  } catch (error) {\n    console.error('Failed to get image URL:', error);\n    throw error;\n  }\n}\n\nexport async function deleteImage(path) {\n  if (!path) {\n    throw new Error('Path is required');\n  }\n\n  try {\n    const { data, error } = await supabase.storage\n      .from('suspects')\n      .remove([path]);\n    \n    if (error) {\n      throw error;\n    }\n\n    return data;\n  } catch (error) {\n    console.error('Delete operation error:', error);\n    throw error;\n  }\n}\n\nexport async function listSuspectImages(suspectId) {\n  if (!suspectId) {\n    throw new Error('Suspect ID is required');\n  }\n\n  try {\n    const { data, error } = await supabase.storage\n      .from('suspects')\n      .list(suspectId);\n    \n    if (error) {\n      throw error;\n    }\n\n    return data || [];\n  } catch (error) {\n    console.error('List operation error:', error);\n    throw error;\n  }\n}\n","export const suspects = [\n  { id: 'general-dijon', name: 'General Dijon', description: 'A sharp-minded and authoritative leader.' },\n  { id: 'violet-bloom', name: 'Violet Bloom', description: 'A mysterious and captivating beauty.' },\n  { id: 'dr-verdant', name: 'Dr. Verdant', description: 'A botanist driven by curiosity.' },\n  { id: 'reverend-woe', name: 'Reverend Woe', description: 'A preacher shrouded in enigma.' }\n];\n"],"names":["uploadImage","file","suspectId","fileName","path","data","error","supabase","getImageUrl","publicUrl","deleteImage","listSuspectImages","suspects"],"mappings":"kCAEO,eAAeA,EAAYC,EAAMC,EAAWC,EAAU,CAC3D,GAAI,CAACF,GAAQ,CAACC,GAAa,CAACC,EAC1B,cAAQ,MAAM,4BAA6B,CAAE,KAAM,CAAC,CAACF,EAAM,UAAAC,EAAW,SAAAC,EAAU,EAC1E,IAAI,MAAM,wCAAwC,EAG1D,GAAI,CACF,MAAMC,EAAO,GAAGF,CAAS,IAAIC,CAAQ,GACrC,QAAQ,IAAI,2BAA4B,CACtC,KAAAC,EACA,SAAUH,EAAK,KACf,SAAUA,EAAK,KACf,aAAcA,EAAK,aACnB,UAAAC,CACN,CAAK,EAED,KAAM,CAAE,KAAAG,EAAM,MAAAC,CAAO,EAAG,MAAMC,EAAS,QACpC,KAAK,UAAU,EACf,OAAOH,EAAMH,EAAM,CAClB,aAAc,OACd,OAAQ,EAChB,CAAO,EAEH,GAAIK,EACF,cAAQ,MAAM,iCAAkCA,CAAK,EAC/CA,EAGR,eAAQ,IAAI,iCAAkC,CAC5C,KAAAD,EACA,KAAAD,EACA,SAAUC,GAAA,YAAAA,EAAM,KAChB,GAAIA,GAAA,YAAAA,EAAM,EAChB,CAAK,EACMA,CACR,OAAQC,EAAO,CACd,cAAQ,MAAM,yBAA0BA,CAAK,EACvC,IAAI,MAAM,kBAAkBA,EAAM,OAAO,EAAE,CACrD,CACA,CAEO,eAAeE,EAAYJ,EAAM,CACtC,GAAI,CAACA,EACH,MAAM,IAAI,MAAM,kBAAkB,EAGpC,GAAI,CACF,QAAQ,IAAI,0BAA2BA,CAAI,EAC3C,KAAM,CAAE,KAAM,CAAE,UAAAK,CAAW,EAAE,MAAAH,CAAK,EAAK,MAAMC,EAAS,QACnD,KAAK,UAAU,EACf,aAAaH,CAAI,EAEpB,GAAIE,EACF,MAAMA,EAGR,GAAI,CAACG,EACH,MAAM,IAAI,MAAM,wBAAwB,EAG1C,eAAQ,IAAI,wBAAyBA,CAAS,EACvCA,CACR,OAAQH,EAAO,CACd,cAAQ,MAAM,2BAA4BA,CAAK,EACzCA,CACV,CACA,CAEO,eAAeI,EAAYN,EAAM,CACtC,GAAI,CAACA,EACH,MAAM,IAAI,MAAM,kBAAkB,EAGpC,GAAI,CACF,KAAM,CAAE,KAAAC,EAAM,MAAAC,CAAO,EAAG,MAAMC,EAAS,QACpC,KAAK,UAAU,EACf,OAAO,CAACH,CAAI,CAAC,EAEhB,GAAIE,EACF,MAAMA,EAGR,OAAOD,CACR,OAAQC,EAAO,CACd,cAAQ,MAAM,0BAA2BA,CAAK,EACxCA,CACV,CACA,CAEO,eAAeK,EAAkBT,EAAW,CACjD,GAAI,CAACA,EACH,MAAM,IAAI,MAAM,wBAAwB,EAG1C,GAAI,CACF,KAAM,CAAE,KAAAG,EAAM,MAAAC,CAAO,EAAG,MAAMC,EAAS,QACpC,KAAK,UAAU,EACf,KAAKL,CAAS,EAEjB,GAAII,EACF,MAAMA,EAGR,OAAOD,GAAQ,CAAE,CAClB,OAAQC,EAAO,CACd,cAAQ,MAAM,wBAAyBA,CAAK,EACtCA,CACV,CACA,CC9GY,MAACM,EAAW,CACtB,CAAE,GAAI,gBAAiB,KAAM,gBAAiB,YAAa,0CAA4C,EACvG,CAAE,GAAI,eAAgB,KAAM,eAAgB,YAAa,sCAAwC,EACjG,CAAE,GAAI,aAAc,KAAM,cAAe,YAAa,iCAAmC,EACzF,CAAE,GAAI,eAAgB,KAAM,eAAgB,YAAa,gCAAgC,CAC3F"}
